local r159_1 = r2_1.Sea["AddToggle"]("ToggleWhiteBelt", {Title = "Cày Đai Trắng", ["Description"] = "", ["Default"] = false})
local r162_1 = function(r0_70)
    _G.AutoLevel = r0_70
    if not r0_70 then
        local r2_70 = game:GetService("ReplicatedStorage")
        local net = r2_70:WaitForChild("Modules"):WaitForChild("Net")
        if net:FindFirstChild("RF/InteractDragonQuest") then
             net["RF/InteractDragonQuest"]:InvokeServer()
        end
        
        spawn(function()
            while task.wait(1) do
                if not _G.AutoLevel then
                    if net:FindFirstChild("RF/InteractDragonQuest") then
                        net["RF/InteractDragonQuest"]:InvokeServer()
                    end
                else
                    break
                end
            end
        end)
    end
end
r159_1["OnChanged"](r162_1)

r2_1.Sea["AddParagraph"]({Title = "Hoàn Thành Ải Draco V4 (Sớm Ra)", ["Content"] = ""})

-- Trial Teleport
local r161_1 = r2_1.Sea["AddToggle"]("ToggleTrialTeleport", {Title = "Bay Đến Cửa Trial Tộc Draco", ["Description"] = "", ["Default"] = false})
local r164_1 = function(r0_368)
    _G.AutoTrialTeleport = r0_368
end
r161_1["OnChanged"](r164_1)

spawn(function()
    while task.wait() do
        if _G.AutoTrialTeleport then
            pcall(function()
                local teleportPart = workspace.Map.PrehistoricIsland:FindFirstChild("TrialTeleport")
                if teleportPart then
                    Tween2(CFrame.new(teleportPart.Position))
                    if (game.Players.LocalPlayer.Character.HumanoidRootPart.Position - teleportPart.Position).Magnitude <= 5 then
                        _G.AutoTrialTeleport = false
                    end
                end
            end)
        end
    end
end)

-- Prehistoric Island Section
r2_1.Sea["AddSection"]("Đảo Dung Nham")
local r163_1 = r2_1.Sea["AddParagraph"]({Title = "Trạng Thái Đảo Dung Nham", ["Content"] = ""})

spawn(function()
    while task.wait(1) do
        pcall(function()
            if game:GetService("Workspace").Map:FindFirstChild("PrehistoricIsland") then
                r163_1:SetDesc("Đảo Dung Nham: ✅️")
            else
                r163_1:SetDesc("Đảo Dung Nham: ❌️")
            end
        end)
    end
end)

local r164_1 = r2_1.Sea["AddToggle"]("ToggleTPVolcano", {Title = "Bay Đến Đảo Dung Nham", ["Description"] = "", ["Default"] = false})
local r167_1 = function(r0_526)
    _G.TweenToPrehistoric = r0_526
end
r164_1["OnChanged"](r167_1)

spawn(function()
    while task.wait() do
        if _G.TweenToPrehistoric then
            pcall(function()
                local island = game:GetService("Workspace").Map:FindFirstChild("PrehistoricIsland")
                if island then
                    local core = island:FindFirstChild("Core")
                    if core then
                        local relic = core:FindFirstChild("PrehistoricRelic")
                        if relic then
                            local skull = relic:FindFirstChild("Skull")
                            if skull then
                                Tween2(CFrame.new(skull.Position))
                                _G.TweenToPrehistoric = false
                            end
                        end
                    end
                end
            end)
        end
    end
end)

-- Defend Volcano
local r165_1 = r2_1.Sea["AddToggle"]("ToggleDefendVolcano", {Title = "Phòng Thủ", ["Description"] = "", ["Default"] = false})
local r168_1 = function(r0_64)
    _G.AutoDefendVolcano = r0_64
end
r165_1["OnChanged"](r168_1)

local r166_1 = r2_1.Sea["AddToggle"]("ToggleMelee", {Title = "Dùng Melee", ["Description"] = "", ["Default"] = false})
local r169_1 = function(r0_534) _G.UseMelee = r0_534 end
r166_1["OnChanged"](r169_1)

local r167_1 = r2_1.Sea["AddToggle"]("ToggleSword", {Title = "Dùng Sword", ["Description"] = "", ["Default"] = false})
local r170_1 = function(r0_239) _G.UseSword = r0_239 end
r167_1["OnChanged"](r170_1)

local r168_1 = r2_1.Sea["AddToggle"]("ToggleGun", {Title = "Dùng Gun", ["Description"] = "", ["Default"] = false})
local r171_1 = function(r0_439) _G.UseGun = r0_439 end
r168_1["OnChanged"](r171_1)

local function cleanLava()
    pcall(function()
        if game.Workspace.Map:FindFirstChild("PrehistoricIsland") then
            local interiorLava = game.Workspace.Map.PrehistoricIsland.Core:FindFirstChild("InteriorLava")
            if interiorLava then interiorLava:Destroy() end
            
            for _, v in pairs(game.Workspace.Map.PrehistoricIsland:GetDescendants()) do
                if v:IsA("BasePart") and v.Name:lower():find("lava") then
                    v:Destroy()
                end
            end
        end
    end)
end

local function useSkills(toolType)
    local backpack = game.Players.LocalPlayer.Backpack
    local char = game.Players.LocalPlayer.Character
    local tool = nil
    
    for _, t in pairs(backpack:GetChildren()) do
        if t:IsA("Tool") and t.ToolTip == toolType then
            tool = t
            break
        end
    end
    if not tool then
        for _, t in pairs(char:GetChildren()) do
            if t:IsA("Tool") and t.ToolTip == toolType then
                tool = t
                break
            end
        end
    end
    
    if tool then
        game.Players.LocalPlayer.Character.Humanoid:EquipTool(tool)
        local vim = game:GetService("VirtualInputManager")
        for _, key in ipairs({"Z", "X", "C", "V", "F"}) do
            vim:SendKeyEvent(true, key, false, game)
            task.wait(0.1)
            vim:SendKeyEvent(false, key, false, game)
        end
    end
end

spawn(function()
    while task.wait() do
        if _G.AutoDefendVolcano then
            cleanLava()
            AutoHaki()
            
            local targetRock = nil
            local rocksFolder = game.Workspace.Map.PrehistoricIsland.Core:FindFirstChild("VolcanoRocks")
            if rocksFolder then
                for _, rock in pairs(rocksFolder:GetChildren()) do
                    if rock.Name == "volcanorock" and rock:IsA("MeshPart") then
                        targetRock = rock
                        break
                    end
                end
            end
            
            if targetRock then
                Tween2(CFrame.new(targetRock.Position))
                if (game.Players.LocalPlayer.Character.HumanoidRootPart.Position - targetRock.Position).Magnitude <= 15 then
                    if _G.UseMelee then useSkills("Melee") end
                    if _G.UseSword then useSkills("Sword") end
                    if _G.UseGun then useSkills("Gun") end
                end
                _G.TweenToPrehistoric = false
            else
                _G.TweenToPrehistoric = true
            end
        end
    end
end)

-- Kill Aura Golem
local r173_1 = r2_1.Sea["AddToggle"]("ToggleKillAura", {Title = "Đánh Golems Aura", ["Description"] = "", ["Default"] = false})
local r176_1 = function(r0_56) KillAura = r0_56 end
r173_1["OnChanged"](r176_1)

spawn(function()
    while task.wait() do
        if KillAura then
            pcall(function()
                for _, v in pairs(game.Workspace.Enemies:GetChildren()) do
                    if v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 and (v.Name:find("Golem")) then
                        if (v.HumanoidRootPart.Position - game.Players.LocalPlayer.Character.HumanoidRootPart.Position).Magnitude <= 60 then
                            v.Humanoid.Health = 0
                            v.HumanoidRootPart.CanCollide = false
                            sethiddenproperty(game.Players.LocalPlayer, "SimulationRadius", math.huge)
                        end
                    end
                end
            end)
        end
    end
end)

-- Collect Bone
local r174_1 = r2_1.Sea["AddToggle"]("ToggleCollectBone", {Title = "Lụm Xương", ["Description"] = "", ["Default"] = false})
local r177_1 = function(r0_408) _G.AutoCollectBone = r0_408 end
r174_1["OnChanged"](r177_1)

spawn(function()
    while task.wait() do
        if _G.AutoCollectBone then
            pcall(function()
                for _, v in pairs(workspace:GetDescendants()) do
                    if v.Name == "DinoBone" and v:IsA("BasePart") then
                        Tween2(CFrame.new(v.Position))
                        break
                    end
                end
            end)
        end
    end
end)

-- Collect Egg
local r175_1 = r2_1.Sea["AddToggle"]("ToggleCollectEgg", {Title = "Lụm Trứng", ["Description"] = "", ["Default"] = false})
local r178_1 = function(r0_581) _G.AutoCollectEgg = r0_581 end
r175_1["OnChanged"](r178_1)

spawn(function()
    while task.wait() do
        if _G.AutoCollectEgg then
            pcall(function()
                local eggFolder = workspace.Map.PrehistoricIsland.Core:FindFirstChild("SpawnedDragonEggs")
                if eggFolder then
                    local eggs = eggFolder:GetChildren()
                    if #eggs > 0 then
                        local target = eggs[1]
                        if target and target.PrimaryPart then
                            Tween2(target.PrimaryPart.CFrame)
                            if (game.Players.LocalPlayer.Character.HumanoidRootPart.Position - target.PrimaryPart.Position).Magnitude <= 5 then
                                local vim = game:GetService("VirtualInputManager")
                                vim:SendKeyEvent(true, "E", false, game)
                                task.wait(0.5)
                                vim:SendKeyEvent(false, "E", false, game)
                            end
                        end
                    end
                end
            end)
        end
    end
end)
